Old cmd line args:  . bw_dragonage_content sprocs.hap bw_dragonage_content_sprocs.sql

TODO:

	remove beforevisitcatchall/aftervisitcatchall?

	syntactic checks:
		cannot use anonymous templates in:
			switch, for, while statement

	investigate why I am using Microsft.Dynamic and Microsoft.Scripting instead of the stuff that's built into 4.5
		(may be since 4.5 this isn't needed anymore)

	use <some invalid asembly> should give correct error message

	increment/decrement operators

	using "var" by accident doesn't seem to yield the correct error message?

	review this file, particularly the "switch statement" and "in progress" headings.
	
	investigate use of DLR "light compiler" and/or interpreter for faster script loading times.

	complete C# schema reading in SqlGen

	create (interactive?) interpreter for running arbitrary scripts

	further increase unit test coverage

	complete SqlGen example project.

	complete other example projects.

	Avoid having to wrap all output expresions in an if statement to prevent null exceptions when the output expression is null
		(call a method to be called at runtime where the output is ignore if the expression is null)

	create classes for executing Happy snippets from other languages with syntactic sugar.

Switch statement:
	semantic check:  case value must be a literal
	needs more unit tests surrounding wierd condtions, such as different types used as case values
	

Interesting ideas:

	Reduce namespace references!  For example: 
			load "SomeDotNetAssembly";
			SomeDotNetNameSpace.SomeNetType.SomeStaticMethod(1);
	
		SomeDotNetNameSpace.SomeNetType.SomeStaticMethod can be reduced at compile time!  Without reduction, this is two GetMember operations and an invoke.
		Those two GetMember operations can be reduced to an invoke on a constant MemberInfo instead.
	A function may only return a value -or- generate output not both?

In progress:
	-How do we handle an ambigous types in different namespaces--i.e. two classes of the same name exist in two used namespaces?

	sequence (allows for(int i = 0; i < 10; ++i) like loops)
		examples:  
			for(i in seq(0, 9))			//equivalent to:  for(int i = 0; i < 10; ++i)
			for(i in seq(9, 0))			//equivalent to:  for(int i = 9; i >= 0; --i)
			for(i in seq(0, 99, 2))		//equivalent to:  for(int i = 0; i < 99; i += 2)
		blockage:  needs common global scope first

Unknowns:
	Is there a difference between indexed properties and properties that have indexed types?

Top priority TODO:

	Crap!  May be need a lexer state stack--how else to ensure that %| isn't used to close a $ with multiple nested output expressions?

	Operate assign operators:  += -= /= *= %=, etc

	Increment decerement operators

	Global script outside of function--part of the global scope initializer

	while loop

	do/while loop
	
	switch:
		switch(expression)
		{
			case constant1:
				break;
			case constant2:
				break;
		}

Debt:

	Create unit tests to handle error conditions in BuildSymbolsVisitor
	
	Move existing semantic checks to SemanticVistor

	Function calls use ArgumentList similarly to indexers, making '(' the function call operator in a binary expression?

	Compile error handling & error messages.

	Create field access tests that are the same as property access tests.  
	
	String concatenation unit tests

	Unit tests for $variable$ Within a template's verbatim text

Low priority TODO:

	Ternary operator (? :)

	operator ??

	Interactive shell a la Symple/IronRuby/IronPython

	case:
		def b = case(exression) { 
			constant1: value1;
			constant2: value2;
			constant3: value3;
			default: value4;
		};

	Apply a number format to output without calling String.Format directly, -i.e.:  ~{mm/dd/yyyy}dateValue;, or from within verbatim: ... ${mm/dd/yyyy}dateValue$

	Need some way of changing the output to a new file?  Provided by the host?

	Include one script within another script

	Can accessing of enums can be optimized by returing a DynamicMetaObject which returns a constant of the enum value instead of an expression generated with MakeMemberAccess?
		(since we know that the enum exists at compile time)

	try/catch/finally/using?

	Variable length parameters?

	Debugging information

Bug:  
	This works:
		<$
		def sprocName;
		foreach(table in database.Tables between "\n\n")
			sprocName = <{<$table.Schema ".gen_" table.Name$>}>
			dropProcedureIfExists(sprocName)
		next
		$>
	It doesn't work if you move the def inside the foreach--sprocName is undefined.


*************************************************************************************
Done:
*************************************************************************************
while loop
	break/continue keywords for loops
		Next step:  write unit tests for break/continue

Use common global scope instead of Dictionary for all global variables and functions.
Not (!) operator
Need plain string concatenation operations.
Bug: .ToString() seems to be neccessary when writing a Int32 instance property to the output.
Bug:
	function GenerateSprocs(database) 
	{
	~<|
	--***************************************************************
	--This code was generated by a tool.
	--Don't modify it by hand.
	--Database:  |%~database.Name;%|
	--Host:  |%~Environment.MachineName;%|
	--Date:  |%~DateTime.Now;%|
	--***************************************************************
	|>  /* <-- missing semicolon causes exception
Bitwise operators