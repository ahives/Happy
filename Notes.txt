Old cmd line args:  . bw_dragonage_content sprocs.hap bw_dragonage_content_sprocs.sql

TODO:
	escape sequences not allowed in character literals (i.e. '\n' is a lexical error)
	don't store runtime context in global scope - pass as a parameter to the global scope initializer in order to reduce dynamic call sites.

	Can't use anonymous template in global initializer due to some kind of bug?
	
	need to include debug info so if an exception is thrown during execution line and column numbers are included:
		http://social.microsoft.com/Forums/eu/Offtopic/thread/d731fae1-c5e4-40e2-852b-0788b0cc2ca3
		"We are working on in-process debugging similar to how VBA debugging works in Office. It's not 100% finished yet and therefore not part of the VS 2010 release. However IronPython already uses it to enable lightweight debugging. You can learn more at http://devhawk.net/2009/07/08/MicrosoftScriptingDebugging.aspx and http://devhawk.net/2009/10/06/Lightweight+Debugging+For+Hybrid+CIronPython+Apps.aspx.
		"You can also compile an Expression Tree to IL with debug information and use traditional PDB based VS debugger. Use Expression.DebugInfo node to add sequence point and source file information to the tree, create a TypeBuilder and a MethodBuilder via Reflection.Emit (see an example at http://msdn.microsoft.com/en-us/library/bs22fky4.aspx) and finally LambdaExpression.CompileToMethod (http://msdn.microsoft.com/en-us/library/dd728258(VS.100).aspx) to emit the IL into the MethodBuilder. You can then place breakpoints to the source files referred to by DebugInfo nodes and step thru the code using VS debugger.

	using keyword

	write unit tests for QuickConnection

	remove beforevisitcatchall/aftervisitcatchall?

	syntactic checks:
		cannot use anonymous templates in:
			switch, for, while statement

	use <some invalid namespace> should give correct error message

	increment/decrement operators

	investigate use of DLR "light compiler" and/or interpreter for faster script loading times.

	create (interactive?) interpreter for running arbitrary scripts

	further increase unit test coverage

	Avoid having to wrap all output expresions in an if statement to prevent null exceptions when the output expression is null
		(call a method to be called at runtime where the output is ignore if the expression is null)

	create classes for executing Happy snippets from other languages with syntactic sugar.

Switch statement:
	semantic check:  case value must be a literal
	needs more unit tests surrounding wierd condtions, such as different types used as case values
	

Interesting ideas:

	Reduce namespace references!  For example: 
			load "SomeDotNetAssembly";
			SomeDotNetNameSpace.SomeNetType.SomeStaticMethod(1);
	
		SomeDotNetNameSpace.SomeNetType.SomeStaticMethod can be reduced at compile time!  Without reduction, this is two GetMember operations and an invoke.
		Those two GetMember operations can be reduced to an invoke on a constant MemberInfo instead.
	A function may only return a value -or- generate output not both?

In progress:
	-How do we handle an ambigous types in different namespaces--i.e. two classes of the same name exist in two used namespaces?

	sequence (allows for(int i = 0; i < 10; ++i) like loops)
		examples:  
			for(i in seq(0, 9))			//equivalent to:  for(int i = 0; i < 10; ++i)
			for(i in seq(9, 0))			//equivalent to:  for(int i = 9; i >= 0; --i)
			for(i in seq(0, 99, 2))		//equivalent to:  for(int i = 0; i < 99; i += 2)
		blockage:  needs common global scope first

Unknowns:
	Is there a difference between indexed properties and properties that have indexed types?

Top priority TODO:

	Crap!  May be need a lexer state stack--how else to ensure that %| isn't used to close a $ with multiple nested output expressions?

	Operate assign operators:  += -= /= *= %=, etc

	Increment decerement operators

	Global script outside of function--part of the global scope initializer

	while loop

	do/while loop
	
	switch:
		switch(expression)
		{
			case constant1:
				break;
			case constant2:
				break;
		}

Debt:

	Create unit tests to handle error conditions in BuildSymbolsVisitor
	
	Move existing semantic checks to SemanticVistor

	Function calls use ArgumentList similarly to indexers, making '(' the function call operator in a binary expression?

	Compile error handling & error messages.

	Create field access tests that are the same as property access tests.  
	
	String concatenation unit tests

	Unit tests for $variable$ Within a template's verbatim text

Low priority TODO:

	Ternary operator (? :)

	operator ??

	Interactive shell a la Symple/IronRuby/IronPython

	case:
		def b = case(exression) { 
			constant1: value1;
			constant2: value2;
			constant3: value3;
			default: value4;
		};

	Apply a number format to output without calling String.Format directly, -i.e.:  ~{mm/dd/yyyy}dateValue;, or from within verbatim: ... ${mm/dd/yyyy}dateValue$

	Need some way of changing the output to a new file?  Provided by the host?

	Include one script within another script

	Can accessing of enums can be optimized by returing a DynamicMetaObject which returns a constant of the enum value instead of an expression generated with MakeMemberAccess?
		(since we know that the enum exists at compile time)

	try/catch/finally/using?

	Variable length parameters?

	Debugging information

Bug:  
	This works:
		<$
		def sprocName;
		foreach(table in database.Tables between "\n\n")
			sprocName = <{<$table.Schema ".gen_" table.Name$>}>
			dropProcedureIfExists(sprocName)
		next
		$>
	It doesn't work if you move the def inside the foreach--sprocName is undefined.


*************************************************************************************
Done:
*************************************************************************************
while loop
	break/continue keywords for loops
		Next step:  write unit tests for break/continue

Use common global scope instead of Dictionary for all global variables and functions.
Not (!) operator
Need plain string concatenation operations.
Bug: .ToString() seems to be neccessary when writing a Int32 instance property to the output.
Bug:
	function GenerateSprocs(database) 
	{
	~<|
	--***************************************************************
	--This code was generated by a tool.
	--Don't modify it by hand.
	--Database:  |%~database.Name;%|
	--Host:  |%~Environment.MachineName;%|
	--Date:  |%~DateTime.Now;%|
	--***************************************************************
	|>  /* <-- missing semicolon causes exception
Bitwise operators